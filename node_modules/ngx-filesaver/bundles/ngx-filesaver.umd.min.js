!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("file-saver"),require("@angular/common/http"),require("@angular/core")):"function"==typeof define&&define.amd?define("ngxFileSaver",["exports","file-saver","@angular/common/http","@angular/core"],t):t(e.ngxFileSaver={},e.saveAs,e.ng.common.http,e.ng.core)}(this,function(e,n,o,i){"use strict";var t=function(){function e(){}return e.prototype.genType=function(e){if(!e||-1===e.lastIndexOf("."))return"text/plain";var t=e.substr(e.lastIndexOf(".")+1);switch(t){case"txt":return"text/plain";case"xml":case"html":return"text/"+t;case"json":return"octet/stream";default:return"application/"+t}},e.prototype.save=function(e,t,r){if(!e)throw new Error("Muse spcify blod argument");n.saveAs(new Blob([e],{type:r||e.type||this.genType(t)}),decodeURI(t||"download"))},e.prototype.saveText=function(e,t){var r=new Blob([e]);this.save(r,t)},e.decorators=[{type:i.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=i.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),r=function(){function e(e,t,r){this.el=e,this._FileSaverService=t,this._httpClient=r,this.method="GET",this.success=new i.EventEmitter,this.error=new i.EventEmitter}return e.prototype.getName=function(e){return decodeURI(this.fileName||e.headers.get("filename")||e.headers.get("x-filename"))},e.prototype._click=function(){var t=this,e=this.http;if(!e){var r=new o.HttpParams,n=this.query||{};for(var i in n)r.set(i,n[i]);e=this._httpClient.request(this.method,this.url,{observe:"response",responseType:"blob",headers:this.header,params:r})}this.el.nativeElement.disabled=!0,e.subscribe(function(e){200!==e.status||e.body.size<=0?t.error.emit(e):(t._FileSaverService.save(e.body,t.getName(e)),t.success.emit(e))},function(e){t.error.emit(e)},function(){t.el.nativeElement.disabled=!1})},e.decorators=[{type:i.Directive,args:[{selector:"[fileSaver]",exportAs:"fileSaver"}]}],e.ctorParameters=function(){return[{type:i.ElementRef},{type:t},{type:o.HttpClient}]},e.propDecorators={method:[{type:i.Input}],http:[{type:i.Input}],query:[{type:i.Input}],header:[{type:i.Input}],url:[{type:i.Input}],fileName:[{type:i.Input}],success:[{type:i.Output}],error:[{type:i.Output}],_click:[{type:i.HostListener,args:["click"]}]},e}(),s=function(){function e(){}return e.decorators=[{type:i.NgModule,args:[{declarations:[r],exports:[r]}]}],e}();e.FileSaverService=t,e.FileSaverDirective=r,e.FileSaverModule=s,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-filesaver.umd.min.js.map